account-transfer/
â”‚
â”œâ”€â”€ server.js
â”œâ”€â”€ models/
â”‚   â””â”€â”€ Account.js
â””â”€â”€ routes/
    â””â”€â”€ accountRoutes.js
ðŸ“„ server.js
js
Copy code
const express = require("express");
const mongoose = require("mongoose");
const bodyParser = require("body-parser");
const accountRoutes = require("./routes/accountRoutes");

const app = express();
app.use(bodyParser.json());

// âœ… Connect MongoDB
mongoose.connect("mongodb://localhost:27017/bankDB", {
  useNewUrlParser: true,
  useUnifiedTopology: true,
})
.then(() => console.log("âœ… MongoDB Connected"))
.catch(err => console.error("âŒ DB Connection Error:", err));

// âœ… Routes
app.use("/api/accounts", accountRoutes);

// âœ… Start Server
const PORT = 4000;
app.listen(PORT, () => console.log(`ðŸš€ Server running on http://localhost:${PORT}`));
ðŸ’¾ models/Account.js
js
Copy code
const mongoose = require("mongoose");

const accountSchema = new mongoose.Schema({
  name: { type: String, required: true },
  accountNumber: { type: String, unique: true, required: true },
  balance: { type: Number, required: true, min: 0 },
});

module.exports = mongoose.model("Account", accountSchema);
ðŸ” routes/accountRoutes.js
js
Copy code
const express = require("express");
const router = express.Router();
const Account = require("../models/Account");

// âœ… Create Account
router.post("/create", async (req, res) => {
  try {
    const { name, accountNumber, balance } = req.body;

    const existing = await Account.findOne({ accountNumber });
    if (existing) return res.status(400).json({ message: "Account number already exists" });

    const newAccount = new Account({ name, accountNumber, balance });
    await newAccount.save();

    res.status(201).json({ message: "âœ… Account created successfully", account: newAccount });
  } catch (error) {
    res.status(500).json({ message: "Server Error", error });
  }
});

// âœ… Get Account Balance
router.get("/balance/:accountNumber", async (req, res) => {
  try {
    const { accountNumber } = req.params;
    const account = await Account.findOne({ accountNumber });
    if (!account) return res.status(404).json({ message: "Account not found" });

    res.json({ name: account.name, balance: account.balance });
  } catch (error) {
    res.status(500).json({ message: "Server Error", error });
  }
});

// âœ… Transfer Money Between Accounts
router.post("/transfer", async (req, res) => {
  try {
    const { fromAccount, toAccount, amount } = req.body;

    if (amount <= 0) return res.status(400).json({ message: "Amount must be positive" });

    const sender = await Account.findOne({ accountNumber: fromAccount });
    const receiver = await Account.findOne({ accountNumber: toAccount });

    if (!sender) return res.status(404).json({ message: "Sender account not found" });
    if (!receiver) return res.status(404).json({ message: "Receiver account not found" });

    if (sender.balance < amount)
      return res.status(400).json({ message: "Insufficient balance for transfer" });

    // âœ… Transaction: Debit & Credit
    sender.balance -= amount;
    receiver.balance += amount;

    await sender.save();
    await receiver.save();

    res.json({
      message: "âœ… Transfer successful",
      from: sender.accountNumber,
      to: receiver.accountNumber,
      transferredAmount: amount,
      senderBalance: sender.balance,
      receiverBalance: receiver.balance,
    });
  } catch (error) {
    res.status(500).json({ message: "Transfer failed", error });
  }
});

module.exports = router;
ðŸ§¾ Example Usage (via Postman)
1ï¸âƒ£ Create Accounts
POST â†’ http://localhost:4000/api/accounts/create

json
Copy code
{
  "name": "Arpit",
  "accountNumber": "ACC1001",
  "balance": 5000
}
POST â†’ http://localhost:4000/api/accounts/create

json
Copy code
{
  "name": "Rahul",
  "accountNumber": "ACC1002",
  "balance": 3000
}
2ï¸âƒ£ Check Balance
GET â†’ http://localhost:4000/api/accounts/balance/ACC1001

Response:

json
Copy code
{
  "name": "Arpit",
  "balance": 5000
}
3ï¸âƒ£ Transfer Money
POST â†’ http://localhost:4000/api/accounts/transfer

json
Copy code
{
  "fromAccount": "ACC1001",
  "toAccount": "ACC1002",
  "amount": 1500
}
Response:

json
Copy code
{
  "message": "âœ… Transfer successful",
  "from": "ACC1001",
  "to": "ACC1002",
  "transferredAmount": 1500,
  "senderBalance": 3500,
  "receiverBalance": 4500
}
